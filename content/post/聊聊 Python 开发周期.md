---
title: "聊聊 Python 开发周期"
date: 2022-03-30T15:47:22+08:00
tags:
    - python
---

>   真的好久没写博客了，这个月无论如何都要~~水~~写一篇。

在某个阳光明媚的不幸日子里，我遇到了 Python 标准库的一个 [bug](https://bugs.python.org/issue35621)。尽管问题已经被解决了，但仍有几点困扰着我：

-   如果我遇到 Python 标准库的 bug、并提交了一个 bug fix，它会被合并到哪几个版本？
-   如果我试图向 Python 标准库添加一个 feature，又可以被合并到哪几个版本？

那么下面就让小编带大家来揭开这几个问题吧！

<!--more-->

其实以上几个问题，本质上就是 Python 开发周期的问题。关注 Python 的朋友在去年年底可能听到过 Python 3.6 end-of-life 的消息 —— end-of-life 就是开发周期中的最后一个阶段。一个 Python 版本的开发周期，类似于一个人的生命周期，大致是少壮老死这几个阶段。具体来说：

-   开发阶段（In-development）
-   维护阶段（Maintenance）
-   安全维护阶段（Security）
-   生命结束（End-of-life）

**开发阶段**在 CPython 的 `main` 分支上进行。目前 CPython 仓库中还有 `3.7`、`3.8`、`3.9`、`3.10` 等几个分支，而主分支上正在开发的自然就是 Python 3.11 版本的代码。在开发阶段，开发人员可以向开发分支提交新的特性（feature），这些特性会随着下一个 Python 小版本一起发布。

一旦主分支上的代码发布 3.11b1 版本，进入 beta 测试，那就应该切出自己的 `3.11` 分支，进入**维护阶段**。一旦进入维护阶段，该版本分支就不会再接受新的特性了。如果你想要向 Python 提交新的特性，那么你可以提交给主分支，这些特性会随着 3.12（或者其他后续版本）发布。维护模式下的分支只会对一些 bug 进行修复，并周期性的发布一些补丁版本：例如 3.10.1、3.10.2 等。

一般来说，当 3.m 版本进入维护阶段一定时间后，3.m-1 版本的发布管理者（release manager）就可以考虑让该版本进入**安全维护阶段**。处于安全维护阶段的版本甚至不再接受 bug 修复，只会对重大的安全漏洞（vulnerability）进行修复。修复后同样是发布一个补丁版本。如果你正在使用一个处于安全维护阶段的 Python 版本，并且不幸遇到了 Python 的 bug，那么你只有忍受或者考虑升级了 :( 总的来说：

| 版本 | 分支 | 阶段         |
| ---- | ---- | ------------ |
| 3.11 | main | 开发阶段     |
| 3.10 | 3.10 | 维护阶段     |
| 3.9  | 3.9  | 维护阶段     |
| 3.8  | 3.8  | 安全维护阶段 |
| 3.7  | 3.7  | 安全维护阶段 |

开发周期超过五年的分支会进入**生命结束**阶段。例如 Python 3.6 于 2016 年底发布，在 2021 年底生命结束。相关分支会被从代码仓库中删除。当然，即使该版本生命结束了，你也仍可以从 Python [官网](https://www.python.org/)上下载到其安装包等构件产物。所以你仍然可以使用生命结束的版本，只是一般来说不推荐这么做。

所以，对于开头的两个问题，我们的答案是：

-   你提交的 bug fix 只能被合并到受影响的、且处于维护阶段的分支。
-   你提交的 feature 只能被合并到开发分支。

最后，本文内容基本来自[^1]。觉得我写得啰里八嗦、狗屁不通的朋友欢迎直接阅读原文。

---

[^1]: https://devguide.python.org/devcycle/
